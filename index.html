<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Electron App</title>
    <link href="output.css" rel="stylesheet" />
    <style>
      .settings-wrapper {
        height: 200px; /* Adjust as needed */
      }

      .settings {
        display: none;
        flex-direction: column;
      }

      .settings.active {
        display: flex;
      }

      .content-area {
        display: flex;
        flex-direction: column;
        height: calc(
          100% - 48px
        ); /* Adjust according to the height of the top section */
        overflow: hidden;
      }

      .tab-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .buttons-section {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
      }

      .tab-buttons {
        margin-bottom: 10px;
      }

      .flex-grow {
        flex-grow: 1;
      }

      .flex-container {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        align-content: center;
      }

      .flex-item {
        margin: 8px;
      }

      .flex-checkbox {
        display: flex;
        align-items: center;
      }

      .flex-row {
        display: flex;
        align-items: center;
        margin-bottom: 16px;
      }

      .flex-label {
        width: 80px; /* Adjust this width as needed */
      }

      .flex-input {
        flex-grow: 1;
      }
    </style>
  </head>
  <body class="p-4 bg-gray-100 h-auto flex items-center justify-center">
    <div
      class="bg-white shadow-lg rounded-lg p-6 w-full h-full max-w-full flex flex-col"
    >
      <div class="flex mb-1 w-full">
        <div class="border p-2">
          <div class="mb-2 p-2">
            <input type="radio" name="type" id="tcpip" checked class="mr-2" />
            <label for="tcpip">TCP/IP</label>
          </div>
          <div class="p-2">
            <input type="radio" name="type" id="serial" class="mr-2" />
            <label for="serial">Serial</label>
          </div>
          <div class="flex flex-col gap-2">
            <button
              id="btn-lis1a"
              class="mr-4 text-xs px-5 py-2 bg-blue-500 text-white rounded"
            >
              LIS1A
            </button>
            <button
              id="btn-manual"
              class="px-4 text-xs py-2 bg-gray-200  text-white rounded"
            >
              Manual
            </button>
          </div>
        </div>

        <div class="border p-2 ml-4 flex-grow settings-wrapper">
          <div class="settings active" id="tcpip-settings">
            <div class="flex-row w-1/3 p-2">
              <label class="flex-label w-1/3">IP:</label>
              <input
                type="text"
                id="ip"
                value="127.0.0.1"
                class="p-1 border rounded flex-input"
              />
            </div>
            <div class="flex-row  w-1/3 p-2">
              <label class="flex-label w-1/3">Port:</label>
              <input
                type="text"
                id="port"
                value="8080"
                class="p-1 border rounded flex-input"
              />
            </div>
            <div class="flex-checkbox">
              <input type="checkbox" class="mr-2" />
              <label>Use as Server</label>
            </div>
          </div>

          <div class="settings flex flex-wrap w-full" id="serial-settings">
            <div class="flex-row w-1/3 p-2">
              <label class="flex-label w-1/3">Port:</label>
              <select class="p-1 border rounded flex-input w-2/3">
                <option value="COM1">COM1</option>
                <option value="COM2">COM2</option>
                <option value="COM3">COM3</option>
              </select>
            </div>
            <div class="flex-row w-1/3 p-2">
              <label class="flex-label w-1/3">Baud:</label>
              <select class="p-1 border rounded flex-input w-2/3">
                <option value="9600">9600</option>
                <option value="14400">14400</option>
                <option value="19200">19200</option>
              </select>
            </div>
            <div class="flex-row w-1/3 p-2">
              <label class="flex-label w-1/3">Data Bits:</label>
              <select class="p-1 border rounded flex-input w-2/3">
                <option value="8">8</option>
                <option value="7">7</option>
              </select>
            </div>
            <div class="flex-row w-1/3 p-2">
              <label class="flex-label w-1/3">Parity:</label>
              <select class="p-1 border rounded flex-input w-2/3">
                <option value="None">None</option>
                <option value="Even">Even</option>
                <option value="Odd">Odd</option>
              </select>
            </div>
            <div class="flex-row w-1/3 p-2">
              <label class="flex-label w-1/3">Stop Bits:</label>
              <select class="p-1 border rounded flex-input w-2/3">
                <option value="1">1</option>
                <option value="2">2</option>
              </select>
            </div>

            <div class="flex-row w-1/3 p-2">
              <label class="flex-label w-1/3">Flow:</label>
              <select class="p-1 border rounded flex-input w-2/3">
                <option value="None">None</option>
                <option value="XON/XOFF">XON/XOFF</option>
                <option value="RTS/CTS">RTS/CTS</option>
              </select>
            </div>
          </div>

          <div class="flex justify-end gap-2" style="margin-top: -3rem">
            <button disabled class="bg-gray-300 text-black px-4 py-2 rounded">
              Received
            </button>
            <button disabled class="bg-gray-300 text-black px-4 py-2 rounded">
              Sent
            </button>
            <button disabled class="bg-gray-300 text-black px-4 py-2 rounded mr-2">
              Clear
            </button>
            <button
                id="sendButton"
                class="bg-gray-300 text-black px-4 py-2 rounded"
                disabled
              >
                Send
              </button>
          </div>
        </div>

        <div class="ml-4 flex flex-col justify-around">
          <button
            id="connectButton"
            class="bg-blue-500 text-white px-4 py-2 mb-2 rounded"
          >
            Connect
          </button>
          <button
            id="disconnectButton"
            class="bg-gray-500 text-white px-4 py-2 mb-2 rounded"
            disabled
          >
            Disconnect
          </button>
        </div>
      </div>

        <div id="tab-content" class="tab-content">
          <div id="lis1a-content" class="p-2" style="display: none">
            <div class="flex items-center mb-4 gap-2">
              <input type="radio" name="simulate" class="mr-2" />
              <label>Simulate Instrument</label>
              <input type="radio" name="simulate" class="ml-4 mr-2" />
              <label>Simulate Host</label>
              <input type="radio" name="frame" class="mr-2" />
              <label>Use Fixed Frame Size</label>
              <input
                type="number"
                value="240"
                class="ml-2 p-1 border rounded w-16"
              />
              <input type="radio" name="frame" class="mr-2" />
              <label>Use a Frame for each Record</label>
            </div>
            <div class="flex flex-col mb-4 flex-grow">
              <textarea
                id="firstSpaceContent"
                class="border p-2 mb-2 flex-grow h-[30vh]"
                placeholder="First space content"
              ></textarea>
              <textarea
                id="secondSpaceContent"
                class="border p-2 flex-grow h-[30vh]"
                placeholder="Second space content"
              ></textarea>
            </div>
          </div>

          <!-- Manual content -->
          <div id="manual-content" class="tab-pane" style="display: none">
            <div class="flex-container">
              <div class="flex-item">
                <label>Character List:</label>
                <select class="p-2 border rounded ml-2">
                  <option value="<NUL>">&lt;NUL&gt; 0</option>
                  <option value="<SOH>">&lt;SOH&gt; 1</option>
                  <option value="<STX>">&lt;STX&gt; 2</option>
                </select>
              </div>
              <div class="flex-item">
                <label>Start String:</label>
                <input type="text" class="p-2 border rounded ml-2" />
              </div>
              <div class="flex-item">
                <label>End String:</label>
                <input type="text" class="p-2 border rounded ml-2" />
              </div>
              <div class="flex-checkbox">
                <div class="flex-item">
                  <input type="checkbox" class="mr-2" />
                  <label>Old ASTM</label>
                </div>
                <div class="flex-item items-center">
                  <input type="checkbox" class="mr-2" />
                  <label>Checksum</label>
                </div>
              </div>
              <div class="flex-container">
                <div class="flex-item items-center">
                  <label>Include:</label>
                  <select class="p-2 border rounded ml-2">
                    <option value="Both Start and End">
                      Both Start and End
                    </option>
                  </select>
                </div>
                <div class="flex-item">
                  <label>Checksum:</label>
                  <select class="p-2 border rounded ml-2">
                    <option value="AddMod256">AddMod256</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="flex mb-4">
              <textarea
                id="sentContent"
                class="border p-2 mb-2 flex-grow h-[11rem]"
                placeholder="Sent content"
              ></textarea>
            </div>
            <div class="flex mb-2">
              <textarea
                id="receivedContent"
                class="border p-2 flex-grow h-[11rem]"
                placeholder="Received content"
              ></textarea>
            </div>
            <!-- Additional content for Manual tab -->
            <div class="flex items-center mb-1">
              <div class="flex-item">
                <label class="w-24">Disconnected</label>
                <input type="text" class="p-2 border rounded ml-2 w-16" />
              </div>
              <div class="flex-item">
                <button class="bg-gray-300 text-xs text-black px-4 py-2 rounded ml-2">
                  Send Line
                </button>
              </div>
              <div class="flex-item">
                <input type="text" class="p-2 border rounded ml-2 w-16" />
              </div>
              <div class="flex-item">
                <button class="bg-gray-300 text-xs text-black px-4 py-2 rounded ml-2">
                  Send Char(s)
                </button>
                <button class="bg-gray-300 text-xs text-black px-4 py-2 rounded mr-2">
                  Send Memo
                </button>
                <button class="bg-gray-300 text-xs text-black px-4 py-2 rounded">
                  Load Input
                </button>
              </div>
            </div>
            <div class="flex mb-4 flex-wrap">
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                NULL
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                SOH
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                STX
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                ETX
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                EOT
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                ENQ
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                ACK
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                BEL
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                BS
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                HT
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                LF
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                VT
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                FF
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                CR
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                SO
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                SI
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                DLE
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                DC1
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                DC2
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                DC3
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                DC4
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                NAK
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                SYN
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                ETB
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                CAN
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                EM
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                SUB
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                ESC
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                FS
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                GS
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                RS
              </button>
              <button
                class="bg-gray-300 text-xs text-black px-4 py-2 rounded m-1"
              >
                US
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const { ipcRenderer } = require("electron");

      document.getElementById("tcpip").addEventListener("change", function () {
        document.getElementById("tcpip-settings").classList.add("active");
        document.getElementById("serial-settings").classList.remove("active");
      });

      document.getElementById("serial").addEventListener("change", function () {
        document.getElementById("tcpip-settings").classList.remove("active");
        document.getElementById("serial-settings").classList.add("active");
      });

      document
        .getElementById("btn-lis1a")
        .addEventListener("click", function () {
          document.getElementById("lis1a-content").style.display = "block";
          document.getElementById("manual-content").style.display = "none";
          this.classList.add("bg-blue-500", "text-white");
          document
            .getElementById("btn-manual")
            .classList.remove("bg-blue-500", "text-white");
          document
            .getElementById("btn-manual")
            .classList.add("bg-gray-200", "text-gray-800");
        });

      document
        .getElementById("btn-manual")
        .addEventListener("click", function () {
          document.getElementById("lis1a-content").style.display = "none";
          document.getElementById("manual-content").style.display = "block";
          this.classList.add("bg-blue-500", "text-white");
          document
            .getElementById("btn-lis1a")
            .classList.remove("bg-blue-500", "text-white");
          document
            .getElementById("btn-lis1a")
            .classList.add("bg-gray-200", "text-gray-800");
        });

      document.getElementById("connectButton").addEventListener("click", () => {
        const ip = document.getElementById("ip").value;
        const port = document.getElementById("port").value;
        ipcRenderer.invoke("connect-ws", ip, port);
      });

      document
        .getElementById("disconnectButton")
        .addEventListener("click", () => {
          ipcRenderer.invoke("disconnect-ws");
        });

      document.getElementById("sendButton").addEventListener("click", () => {
        const message = document.getElementById("firstSpaceContent").value;
        ipcRenderer.invoke("send-ws", message);
      });

      ipcRenderer.on("ws-connected", (event, message) => {
        document.getElementById("connectButton").disabled = true;
        document.getElementById("disconnectButton").disabled = false;
        document.getElementById("sendButton").disabled = false;
        document.getElementById("disconnectButton").classList.add("bg-red-500");
        document
          .getElementById("disconnectButton")
          .classList.remove("bg-gray-500");
        document.getElementById("secondSpaceContent").value += message + "\n";
      });

      ipcRenderer.on("ws-disconnected", (event, message) => {
        document.getElementById("connectButton").disabled = false;
        document.getElementById("disconnectButton").disabled = true;
        document.getElementById("sendButton").disabled = true;
        document
          .getElementById("disconnectButton")
          .classList.remove("bg-red-500");
        document
          .getElementById("disconnectButton")
          .classList.add("bg-gray-500");
        document.getElementById("secondSpaceContent").value += message + "\n";
      });

      ipcRenderer.on("ws-data", (event, data) => {
        document.getElementById("secondSpaceContent").value += data + "\n";
      });

      ipcRenderer.on("ws-error", (event, error) => {
        document.getElementById("secondSpaceContent").value +=
          "Error: " + error + "\n";
      });

      document.getElementById("btn-lis1a").click(); // Set initial tab
    </script>
  </body>
</html>
